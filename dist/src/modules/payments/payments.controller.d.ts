import { Request } from 'express';
import { PaymentsService } from './payments.service';
import { QpayService } from './qpay.service';
import { User, PaymentMethod } from '@prisma/client';
declare class CreatePaymentDto {
    subscriptionPlanId?: string;
    movieId?: string;
    paymentMethod?: PaymentMethod;
    bankAccountId?: string;
}
declare class WebhookBodyDto {
    invoice?: string;
    invoice_id?: string;
    invoice_status?: string;
    payment_status?: string;
}
export declare class PaymentsController {
    private paymentsService;
    private qpayService;
    private readonly logger;
    constructor(paymentsService: PaymentsService, qpayService: QpayService);
    createPayment(user: User, dto: CreatePaymentDto): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        subscriptionPlanId: string | null;
        movieId: string | null;
        amount: number;
        status: import(".prisma/client").$Enums.PaymentStatus;
        paymentMethod: import(".prisma/client").$Enums.PaymentMethod;
        qpayInvoiceId: string | null;
        qpayQrCode: string | null;
        qpayQrImage: string | null;
        qpayDeeplinks: import("@prisma/client/runtime/library").JsonValue | null;
        qpayPaymentId: string | null;
        qpayRawPayload: import("@prisma/client/runtime/library").JsonValue | null;
        bankAccountId: string | null;
        transferRef: string | null;
        userNotifiedAt: Date | null;
        invoiceCode: string;
        paidAt: Date | null;
        reconcileAttempts: number;
        lastReconcileAt: Date | null;
        nextReconcileAt: Date | null;
        reconcileSource: import(".prisma/client").$Enums.ReconcileSource | null;
    }>;
    getBankAccounts(): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        description: string | null;
        isActive: boolean;
        bankName: string;
        bankCode: string;
        accountNumber: string;
        accountHolder: string;
        sortOrder: number;
    }[]>;
    handleWebhook(invoiceCode: string): Promise<{
        success: boolean;
        action: "created" | "updated" | "skipped" | "already_paid";
    }>;
    handleWebhookPost(body: WebhookBodyDto, signature: string, req: Request): Promise<{
        success: boolean;
        action: "created" | "updated" | "skipped" | "already_paid";
        reason: string | undefined;
    }>;
    notifyBankTransferPaid(id: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        subscriptionPlanId: string | null;
        movieId: string | null;
        amount: number;
        status: import(".prisma/client").$Enums.PaymentStatus;
        paymentMethod: import(".prisma/client").$Enums.PaymentMethod;
        qpayInvoiceId: string | null;
        qpayQrCode: string | null;
        qpayQrImage: string | null;
        qpayDeeplinks: import("@prisma/client/runtime/library").JsonValue | null;
        qpayPaymentId: string | null;
        qpayRawPayload: import("@prisma/client/runtime/library").JsonValue | null;
        bankAccountId: string | null;
        transferRef: string | null;
        userNotifiedAt: Date | null;
        invoiceCode: string;
        paidAt: Date | null;
        reconcileAttempts: number;
        lastReconcileAt: Date | null;
        nextReconcileAt: Date | null;
        reconcileSource: import(".prisma/client").$Enums.ReconcileSource | null;
    }>;
    getPayment(id: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        subscriptionPlanId: string | null;
        movieId: string | null;
        amount: number;
        status: import(".prisma/client").$Enums.PaymentStatus;
        paymentMethod: import(".prisma/client").$Enums.PaymentMethod;
        qpayInvoiceId: string | null;
        qpayQrCode: string | null;
        qpayQrImage: string | null;
        qpayDeeplinks: import("@prisma/client/runtime/library").JsonValue | null;
        qpayPaymentId: string | null;
        qpayRawPayload: import("@prisma/client/runtime/library").JsonValue | null;
        bankAccountId: string | null;
        transferRef: string | null;
        userNotifiedAt: Date | null;
        invoiceCode: string;
        paidAt: Date | null;
        reconcileAttempts: number;
        lastReconcileAt: Date | null;
        nextReconcileAt: Date | null;
        reconcileSource: import(".prisma/client").$Enums.ReconcileSource | null;
    }>;
    checkPayment(id: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        subscriptionPlanId: string | null;
        movieId: string | null;
        amount: number;
        status: import(".prisma/client").$Enums.PaymentStatus;
        paymentMethod: import(".prisma/client").$Enums.PaymentMethod;
        qpayInvoiceId: string | null;
        qpayQrCode: string | null;
        qpayQrImage: string | null;
        qpayDeeplinks: import("@prisma/client/runtime/library").JsonValue | null;
        qpayPaymentId: string | null;
        qpayRawPayload: import("@prisma/client/runtime/library").JsonValue | null;
        bankAccountId: string | null;
        transferRef: string | null;
        userNotifiedAt: Date | null;
        invoiceCode: string;
        paidAt: Date | null;
        reconcileAttempts: number;
        lastReconcileAt: Date | null;
        nextReconcileAt: Date | null;
        reconcileSource: import(".prisma/client").$Enums.ReconcileSource | null;
    }>;
    reconcilePayment(id: string): Promise<{
        id: string;
        createdAt: Date;
        updatedAt: Date;
        userId: string;
        subscriptionPlanId: string | null;
        movieId: string | null;
        amount: number;
        status: import(".prisma/client").$Enums.PaymentStatus;
        paymentMethod: import(".prisma/client").$Enums.PaymentMethod;
        qpayInvoiceId: string | null;
        qpayQrCode: string | null;
        qpayQrImage: string | null;
        qpayDeeplinks: import("@prisma/client/runtime/library").JsonValue | null;
        qpayPaymentId: string | null;
        qpayRawPayload: import("@prisma/client/runtime/library").JsonValue | null;
        bankAccountId: string | null;
        transferRef: string | null;
        userNotifiedAt: Date | null;
        invoiceCode: string;
        paidAt: Date | null;
        reconcileAttempts: number;
        lastReconcileAt: Date | null;
        nextReconcileAt: Date | null;
        reconcileSource: import(".prisma/client").$Enums.ReconcileSource | null;
    }>;
}
export {};
